@if (movies()) {
<app-navbar></app-navbar>
<div
	class="min-h-screen bg-gradient-to-br from-indigo-50 via-white to-purple-50 dark:from-gray-900 dark:via-gray-800 dark:to-indigo-900"
>
	<div>
		<div class="relative px-4 py-16 sm:px-6 lg:px-8"></div>
		<div
			class="absolute top-10 left-10 w-20 h-20 bg-yellow-400/20 rounded-full blur-xl animate-pulse"
		></div>
		<div
			class="absolute bottom-10 right-10 w-32 h-32 bg-pink-400/20 rounded-full blur-xl animate-pulse delay-1000"
		></div>
	</div>

	<!-- Search Form -->
	<div class="relative -mt-8 px-4 sm:px-6 lg:px-8">
		<div class="max-w-6xl mx-auto">
			<form
				[formGroup]="searchForm"
				(ngSubmit)="onSubmit()"
				autocomplete="off"
				class="bg-white/80 dark:bg-gray-800/80 backdrop-blur-xl rounded-3xl shadow-2xl border border-white/20 dark:border-gray-700/50 p-8 transform transition-all duration-500 hover:shadow-3xl"
			>
				<div
					class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8"
				>
					<!-- Title Input -->
					<div class="relative group">
						<div
							class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
						>
							<svg
								class="h-5 w-5 text-gray-400 group-focus-within:text-purple-500 transition-colors"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M7 4V2a1 1 0 011-1h8a1 1 0 011 1v2h4a1 1 0 011 1v1a1 1 0 01-1 1H3a1 1 0 01-1-1V5a1 1 0 011-1h4z"
								/>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M5 8v12a2 2 0 002 2h10a2 2 0 002-2V8"
								/>
							</svg>
						</div>
						<input
							type="text"
							formControlName="title"
							placeholder="Movie title"
							class="w-full pl-12 pr-4 py-4 text-lg bg-gray-50/50 dark:bg-gray-700/50 border-2 border-gray-200/50 dark:border-gray-600/50 rounded-2xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all duration-300 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 hover:border-purple-300 hover:shadow-lg"
						/>
					</div>

					<!-- Year Input -->
					<div class="relative group">
						<div
							class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
						>
							<svg
								class="h-5 w-5 text-gray-400 group-focus-within:text-purple-500 transition-colors"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"
								/>
							</svg>
						</div>
						<input
							type="text"
							formControlName="year"
							placeholder="Release year"
							class="w-full pl-12 pr-4 py-4 text-lg bg-gray-50/50 dark:bg-gray-700/50 border-2 border-gray-200/50 dark:border-gray-600/50 rounded-2xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all duration-300 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 hover:border-purple-300 hover:shadow-lg"
						/>
					</div>

					<!-- Genre Input -->
					<div class="relative group">
						<div
							class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
						>
							<svg
								class="h-5 w-5 text-gray-400 group-focus-within:text-purple-500 transition-colors"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"
								/>
							</svg>
						</div>
						<input
							type="text"
							formControlName="genre"
							placeholder="Genre"
							class="w-full pl-12 pr-4 py-4 text-lg bg-gray-50/50 dark:bg-gray-700/50 border-2 border-gray-200/50 dark:border-gray-600/50 rounded-2xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all duration-300 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 hover:border-purple-300 hover:shadow-lg"
						/>
					</div>

					<!-- Limit Input -->
					<div class="relative group">
						<div
							class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none"
						>
							<svg
								class="h-5 w-5 text-gray-400 group-focus-within:text-purple-500 transition-colors"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"
								/>
							</svg>
						</div>
						<input
							type="number"
							formControlName="pageSize"
							placeholder="Limit"
							class="w-full pl-12 pr-4 py-4 text-lg bg-gray-50/50 dark:bg-gray-700/50 border-2 border-gray-200/50 dark:border-gray-600/50 rounded-2xl focus:border-purple-500 focus:ring-4 focus:ring-purple-500/20 transition-all duration-300 dark:text-white placeholder-gray-500 dark:placeholder-gray-400 hover:border-purple-300 hover:shadow-lg"
						/>
					</div>
				</div>

				<!-- Action Buttons -->
				<div
					class="flex flex-col sm:flex-row justify-center items-center gap-4"
				>
					<button
						type="submit"
						class="group relative px-8 py-4 text-lg font-semibold rounded-2xl bg-gradient-to-r from-purple-600 to-blue-600 text-white shadow-xl hover:shadow-2xl transform hover:-translate-y-1 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-purple-500/50 hover:from-purple-700 hover:to-blue-700 min-w-[160px]"
					>
						<span
							class="relative z-10 flex items-center justify-center gap-2"
						>
							<svg
								class="w-5 h-5 group-hover:rotate-12 transition-transform duration-300"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
								/>
							</svg>
							Search
						</span>
						<div
							class="absolute inset-0 bg-gradient-to-r from-purple-700 to-blue-700 rounded-2xl opacity-0 group-hover:opacity-100 transition-opacity duration-300"
						></div>
					</button>

					<button
						type="button"
						(click)="clearInputs()"
						class="group px-8 py-4 text-lg font-semibold rounded-2xl bg-white/70 dark:bg-gray-700/70 text-gray-700 dark:text-gray-200 border-2 border-gray-300/50 dark:border-gray-600/50 backdrop-blur-sm shadow-lg hover:shadow-xl transform hover:-translate-y-1 transition-all duration-300 focus:outline-none focus:ring-4 focus:ring-gray-500/20 hover:bg-gray-50 dark:hover:bg-gray-600 min-w-[160px]"
					>
						<span class="flex items-center justify-center gap-2">
							<svg
								class="w-5 h-5 group-hover:rotate-180 transition-transform duration-500"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
								/>
							</svg>
							Clear
						</span>
					</button>
				</div>
			</form>
		</div>
	</div>

	<!-- Results Section -->
	<div class="px-4 sm:px-6 lg:px-8 py-12">
		<div class="max-w-7xl mx-auto">
			@if (movies().length > 0) {
			<div class="mb-8">
				<h2
					class="text-3xl font-bold text-gray-800 dark:text-white mb-2"
				>
					Search results
				</h2>
				<div
					class="w-24 h-1 bg-gradient-to-r from-purple-500 to-blue-500 rounded-full"
				></div>
			</div>

			<div
				class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-8"
			>
				@for (item of movies(); track $index) {
				<a
					[routerLink]="['/movies', item.id]"
					class="group relative bg-white/80 dark:bg-gray-800/80 backdrop-blur-sm rounded-3xl shadow-xl hover:shadow-2xl transform hover:-translate-y-2 transition-all duration-500 border border-white/20 dark:border-gray-700/50 overflow-hidden hover:scale-105 cursor-pointer"
				>
					<!-- Poster Container -->
					<div
						class="relative overflow-hidden rounded-t-3xl aspect-[2/3] bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800"
					>
						<img
							[alt]="item.title"
							[src]="item.poster"
							class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700"
							loading="lazy"
						/>
						<div
							class="absolute inset-0 bg-gradient-to-t from-black/60 via-transparent to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300"
						></div>

						<!-- Floating Year Badge -->
						<div
							class="absolute top-4 right-4 bg-purple-600/90 backdrop-blur-sm text-white px-3 py-1 rounded-full text-sm font-semibold shadow-lg"
						>
							{{ item.year }}
						</div>
					</div>

					<!-- Content -->
					<div class="p-6 space-y-4">
						<h3
							class="text-xl font-bold text-gray-900 dark:text-white line-clamp-2 group-hover:text-purple-600 dark:group-hover:text-purple-400 transition-colors duration-300"
						>
							{{ item.title }}
						</h3>

						<div
							class="flex items-center gap-2 text-gray-600 dark:text-gray-400"
						>
							<svg
								class="w-4 h-4"
								fill="none"
								viewBox="0 0 24 24"
								stroke="currentColor"
							>
								<path
									stroke-linecap="round"
									stroke-linejoin="round"
									stroke-width="2"
									d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"
								/>
							</svg>
							<span class="text-sm">{{ item.director }}</span>
						</div>

						<!-- Genres -->
						<div class="flex flex-wrap gap-2">
							@for (genre of item.genres.slice(0, 3); track
							$index) {
							<span
								class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gradient-to-r from-blue-100 to-purple-100 text-blue-800 dark:from-blue-900/50 dark:to-purple-900/50 dark:text-blue-200 border border-blue-200/50 dark:border-blue-700/50"
							>
								{{ genre }}
							</span>
							} @if (item.genres.length > 3) {
							<span
								class="inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600 dark:bg-gray-700 dark:text-gray-400"
							>
								+{{ item.genres.length - 3 }}
							</span>
							}
						</div>
					</div>

					<!-- Hover Effect Overlay -->
					<div
						class="absolute inset-0 bg-gradient-to-br from-purple-600/0 to-blue-600/0 group-hover:from-purple-600/10 group-hover:to-blue-600/10 transition-all duration-500 rounded-3xl"
					></div>
				</a>
				}
			</div>
			}

			<!-- No Results State -->
			@if (searchSubmitted && movies().length === 0) {
			<div class="text-center py-20">
				<div
					class="mx-auto w-32 h-32 bg-gradient-to-br from-gray-100 to-gray-200 dark:from-gray-700 dark:to-gray-800 rounded-full flex items-center justify-center mb-8"
				>
					<svg
						class="w-16 h-16 text-gray-400 dark:text-gray-500"
						fill="none"
						viewBox="0 0 24 24"
						stroke="currentColor"
					>
						<path
							stroke-linecap="round"
							stroke-linejoin="round"
							stroke-width="1.5"
							d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"
						/>
					</svg>
				</div>
				<h3
					class="text-2xl font-bold text-gray-800 dark:text-white mb-4"
				>
					No movies found
				</h3>
				<p
					class="text-lg text-gray-600 dark:text-gray-400 max-w-md mx-auto"
				>
					Try changing your search parameters or use different
					keywords
				</p>
			</div>
			}
		</div>
	</div>

	<!-- Decorative background elements -->
	<div class="fixed inset-0 overflow-hidden pointer-events-none -z-10">
		<div
			class="absolute -top-40 -right-40 w-80 h-80 bg-purple-400/10 rounded-full blur-3xl animate-pulse"
		></div>
		<div
			class="absolute -bottom-40 -left-40 w-80 h-80 bg-blue-400/10 rounded-full blur-3xl animate-pulse delay-1000"
		></div>
	</div>
</div>
}
